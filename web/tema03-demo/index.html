<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tema 03 Demo</title>
    <style>
      body { font-family: Segoe UI, Arial, sans-serif; margin: 24px; }
      .hidden { display: none; }
      .card { border: 1px solid #cccccc; border-radius: 8px; padding: 16px; max-width: 420px; }
      .row { margin-bottom: 10px; }
      .status { margin-top: 12px; font-weight: 600; }
      .error { color: #b10000; min-height: 20px; }
    </style>
  </head>
  <body>
    <main class="card">
      <h1 data-testid="login-title">Tema 03 Demo</h1>
      <section id="login-panel">
        <div class="row">
          <label for="username">Usuario</label>
          <input id="username" data-testid="username-input" />
        </div>
        <div class="row">
          <label for="password">Password</label>
          <input id="password" type="password" data-testid="password-input" />
        </div>
        <button data-testid="login-btn" type="button">Login</button>
        <p class="error" data-testid="login-error"></p>
      </section>

      <section id="app-panel" class="hidden">
        <p class="status" data-testid="estado">Estado: No autenticado</p>
        <button data-testid="accion-btn" type="button">Ejecutar accion</button>
        <p data-testid="accion-estado">Accion pendiente</p>
        <button data-testid="logout-btn" type="button">Logout</button>
      </section>
    </main>

    <script>
      (function () {
        const loginPanel = document.getElementById('login-panel');
        const appPanel = document.getElementById('app-panel');
        const usernameInput = document.querySelector('[data-testid="username-input"]');
        const passwordInput = document.querySelector('[data-testid="password-input"]');
        const loginBtn = document.querySelector('[data-testid="login-btn"]');
        const loginError = document.querySelector('[data-testid="login-error"]');
        const estado = document.querySelector('[data-testid="estado"]');
        const accionBtn = document.querySelector('[data-testid="accion-btn"]');
        const accionEstado = document.querySelector('[data-testid="accion-estado"]');
        const logoutBtn = document.querySelector('[data-testid="logout-btn"]');

        const validUser = 'ana';
        const validPassword = 'clave123';

        loginBtn.addEventListener('click', function () {
          const username = usernameInput.value.trim();
          const password = passwordInput.value;

          if (username === validUser && password === validPassword) {
            loginError.textContent = '';
            loginPanel.classList.add('hidden');
            appPanel.classList.remove('hidden');
            estado.textContent = 'Estado: Autenticado';
            accionEstado.textContent = 'Accion pendiente';
            return;
          }

          loginError.textContent = 'Credenciales invalidas';
        });

        accionBtn.addEventListener('click', function () {
          accionEstado.textContent = 'Accion completada';
        });

        logoutBtn.addEventListener('click', function () {
          appPanel.classList.add('hidden');
          loginPanel.classList.remove('hidden');
          estado.textContent = 'Estado: Sesion cerrada';
          usernameInput.value = '';
          passwordInput.value = '';
          loginError.textContent = '';
        });
      })();
    </script>
  </body>
</html>
